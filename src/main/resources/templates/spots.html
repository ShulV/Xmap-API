<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ulisse.it/thymeleaf-layout-dialect"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Spots страница</title>

    <script src="https://api-maps.yandex.ru/v3/?apikey=b9ae7ce3-4f8e-4018-ae49-7751e42c5c25&lang=ru_RU"
            defer th:if="${viewMode == 'YMAP'}"></script>
    <script src="/js/location-util.js" defer th:if="${viewMode == 'YMAP'}"></script>
    <script src="/js/ymap.js" defer th:if="${viewMode == 'YMAP'}"></script>
    <link href="/css/spot-list-map.css" rel="stylesheet">
    <link href="/css/pagination.css" rel="stylesheet">
</head>
<body>
    <main layout:fragment="content" class="content">
        <div class="search-block">
            <div class="search-block__search">
                <input class="search-block__input" type="text" placeholder="Поиск"/>
            </div>
            <div class="search-block__settings">
                <div class="search-block__sort">Сортировка</div>
                <div class="search-block__filters">Фильтры</div>
            </div>
        </div>
        <div class="spots">
            <div class="spot__map" id="spot-map-container-id" defer th:if="${viewMode == 'YMAP'}">
                <div id="yandex-map-id" style="width: 100%; height: 100%"></div>
                <a th:href="@{'/spots?pageNumber=0&pageSize=10&viewMode=CARDS'}"
                   class="view-changing-btn">Список</a>
            </div>
            <div class="spot__list-wrapper" id="spot-list-container-id" th:if="${viewMode == 'CARDS'}">
                <div class="container mt-3 mb-3">
                    <div class="row row-cols-1 g-3 spot__list"
                         th:if="${viewMode == 'CARDS'}">
                        <th:block th:each="item : ${spotList.content}">
                            <a th:href="@{/spot/{spotId}(spotId=${item.id()})}"
                               class="col card card-container shadow-sm rounded spot__item-card">
                                <div class="spot__item-img-wrapper">
                                    <img th:src="${item.firstImageLink()}" alt="spot image"
                                         class="rounded d-block spot__item-img"/>
                                </div>
                                <div class="spot__item-info">
                                    <h5 class="mt-2" th:text="${item.name()}"></h5>
                                    <div class="spot__item-inserted-date"
                                         th:text="${item.insertedAt()}"></div>
                                </div>
                            </a>
                        </th:block>
                    </div>
                    <div th:if="${#lists.isEmpty(spotList.content)}">
                        Нет доступных мест.
                    </div>
                </div>
<!--             Добавляем навигацию по страницам -->
                <nav th:replace="fragments/pagination :: paginationRow(pageable=${spotList}, paginationUrl='/spots', totalItemsLabel='Найдено спотов')">
                    place for list pagination
                </nav>
                <a th:href="@{'/spots?viewMode=YMAP'}" class="view-changing-btn">Карта</a>
            </div>
        </div>

    </main>
</body>
</html>